"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = renderHTML;
exports.resolveLogo = resolveLogo;
exports.validatePrimaryColor = validatePrimaryColor;
var _debug = _interopRequireDefault(require("debug"));
var _lruCache = _interopRequireDefault(require("lru-cache"));
var _path = _interopRequireDefault(require("path"));
var _url = require("url");
var _core = require("@verdaccio/core");
var _url2 = require("@verdaccio/url");
var _constants = require("../../../lib/constants");
var _utils = require("../../../lib/utils");
var _template = _interopRequireDefault(require("./template"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const pkgJSON = require('../../../../package.json');
const DEFAULT_LANGUAGE = 'es-US';
const cache = new _lruCache.default({
  max: 500,
  ttl: 1000 * 60 * 60
});
const debug = (0, _debug.default)('verdaccio');
const defaultManifestFiles = {
  js: ['runtime.js', 'vendors.js', 'main.js'],
  ico: 'favicon.ico'
};
function validatePrimaryColor(primaryColor) {
  const isHex = /^#+([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/i.test(primaryColor);
  if (!isHex) {
    debug('invalid primary color %o', primaryColor);
    return;
  }
  return primaryColor;
}
function resolveLogo(config, req) {
  var _config$web, _config$web2, _config$web4;
  const isLocalFile = (config === null || config === void 0 ? void 0 : (_config$web = config.web) === null || _config$web === void 0 ? void 0 : _config$web.logo) && !(0, _utils.isHTTPProtocol)(config === null || config === void 0 ? void 0 : (_config$web2 = config.web) === null || _config$web2 === void 0 ? void 0 : _config$web2.logo);
  if (isLocalFile) {
    var _config$web3;
    return `${(0, _url2.getPublicUrl)(config === null || config === void 0 ? void 0 : config.url_prefix, req)}-/static/${_path.default.basename(config === null || config === void 0 ? void 0 : (_config$web3 = config.web) === null || _config$web3 === void 0 ? void 0 : _config$web3.logo)}`;
  } else if ((0, _utils.isHTTPProtocol)(config === null || config === void 0 ? void 0 : (_config$web4 = config.web) === null || _config$web4 === void 0 ? void 0 : _config$web4.logo)) {
    var _config$web5;
    return config === null || config === void 0 ? void 0 : (_config$web5 = config.web) === null || _config$web5 === void 0 ? void 0 : _config$web5.logo;
  } else {
    return '';
  }
}
function renderHTML(config, manifest, manifestFiles, req, res) {
  var _config$i18n$web, _config$i18n, _config$web6, _config$web$darkMode, _config$web7, _config$web$title, _config$web8, _config$web$scope, _config$web9, _config$web$pkgManage, _config$web10, _validatePrimaryColor, _config$web11;
  const {
    url_prefix
  } = config;
  const base = (0, _url2.getPublicUrl)(config === null || config === void 0 ? void 0 : config.url_prefix, req);
  const basename = new _url.URL(base).pathname;
  const language = (_config$i18n$web = config === null || config === void 0 ? void 0 : (_config$i18n = config.i18n) === null || _config$i18n === void 0 ? void 0 : _config$i18n.web) !== null && _config$i18n$web !== void 0 ? _config$i18n$web : DEFAULT_LANGUAGE;
  const needHtmlCache = [undefined, null].includes(config === null || config === void 0 ? void 0 : (_config$web6 = config.web) === null || _config$web6 === void 0 ? void 0 : _config$web6.html_cache) ? true : config.web.html_cache;
  const darkMode = (_config$web$darkMode = config === null || config === void 0 ? void 0 : (_config$web7 = config.web) === null || _config$web7 === void 0 ? void 0 : _config$web7.darkMode) !== null && _config$web$darkMode !== void 0 ? _config$web$darkMode : false;
  const title = (_config$web$title = config === null || config === void 0 ? void 0 : (_config$web8 = config.web) === null || _config$web8 === void 0 ? void 0 : _config$web8.title) !== null && _config$web$title !== void 0 ? _config$web$title : _constants.WEB_TITLE;
  const scope = (_config$web$scope = config === null || config === void 0 ? void 0 : (_config$web9 = config.web) === null || _config$web9 === void 0 ? void 0 : _config$web9.scope) !== null && _config$web$scope !== void 0 ? _config$web$scope : '';
  const login = (0, _utils.hasLogin)(config);
  const logoURI = resolveLogo(config, req);
  const pkgManagers = (_config$web$pkgManage = config === null || config === void 0 ? void 0 : (_config$web10 = config.web) === null || _config$web10 === void 0 ? void 0 : _config$web10.pkgManagers) !== null && _config$web$pkgManage !== void 0 ? _config$web$pkgManage : ['yarn', 'pnpm', 'npm'];
  const version = pkgJSON.version;
  const primaryColor = (_validatePrimaryColor = validatePrimaryColor(config === null || config === void 0 ? void 0 : (_config$web11 = config.web) === null || _config$web11 === void 0 ? void 0 : _config$web11.primary_color)) !== null && _validatePrimaryColor !== void 0 ? _validatePrimaryColor : '#4b5e40';
  const {
    scriptsBodyAfter,
    metaScripts,
    scriptsbodyBefore,
    showInfo,
    showSettings,
    showThemeSwitch,
    showFooter,
    showSearch,
    showDownloadTarball
  } = Object.assign({}, {
    scriptsBodyAfter: [],
    bodyBefore: [],
    metaScripts: []
  }, config === null || config === void 0 ? void 0 : config.web);
  const options = {
    showInfo,
    showSettings,
    showThemeSwitch,
    showFooter,
    showSearch,
    showDownloadTarball,
    darkMode,
    url_prefix,
    basename,
    base,
    primaryColor,
    version,
    pkgManagers,
    login,
    logo: logoURI,
    title,
    scope,
    language
  };
  let webPage;
  try {
    webPage = cache.get('template');
    if (!webPage) {
      debug('web options %o', options);
      debug('web manifestFiles %o', manifestFiles);
      webPage = (0, _template.default)({
        manifest: manifestFiles !== null && manifestFiles !== void 0 ? manifestFiles : defaultManifestFiles,
        options,
        scriptsBodyAfter,
        metaScripts,
        scriptsbodyBefore
      }, manifest);
      debug('template :: %o', webPage);
      if (needHtmlCache) {
        cache.set('template', webPage);
        debug('set template cache');
      }
    } else {
      debug('reuse template cache');
    }
  } catch (error) {
    throw new Error(`theme could not be load, stack ${error.stack}`);
  }
  res.setHeader('Content-Type', _core.HEADERS.TEXT_HTML);
  res.send(webPage);
  debug('render web');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwa2dKU09OIiwicmVxdWlyZSIsIkRFRkFVTFRfTEFOR1VBR0UiLCJjYWNoZSIsIkxSVSIsIm1heCIsInR0bCIsImRlYnVnIiwiYnVpbGREZWJ1ZyIsImRlZmF1bHRNYW5pZmVzdEZpbGVzIiwianMiLCJpY28iLCJ2YWxpZGF0ZVByaW1hcnlDb2xvciIsInByaW1hcnlDb2xvciIsImlzSGV4IiwidGVzdCIsInJlc29sdmVMb2dvIiwiY29uZmlnIiwicmVxIiwiaXNMb2NhbEZpbGUiLCJ3ZWIiLCJsb2dvIiwiaXNIVFRQUHJvdG9jb2wiLCJnZXRQdWJsaWNVcmwiLCJ1cmxfcHJlZml4IiwicGF0aCIsImJhc2VuYW1lIiwicmVuZGVySFRNTCIsIm1hbmlmZXN0IiwibWFuaWZlc3RGaWxlcyIsInJlcyIsImJhc2UiLCJVUkwiLCJwYXRobmFtZSIsImxhbmd1YWdlIiwiaTE4biIsIm5lZWRIdG1sQ2FjaGUiLCJ1bmRlZmluZWQiLCJpbmNsdWRlcyIsImh0bWxfY2FjaGUiLCJkYXJrTW9kZSIsInRpdGxlIiwiV0VCX1RJVExFIiwic2NvcGUiLCJsb2dpbiIsImhhc0xvZ2luIiwibG9nb1VSSSIsInBrZ01hbmFnZXJzIiwidmVyc2lvbiIsInByaW1hcnlfY29sb3IiLCJzY3JpcHRzQm9keUFmdGVyIiwibWV0YVNjcmlwdHMiLCJzY3JpcHRzYm9keUJlZm9yZSIsInNob3dJbmZvIiwic2hvd1NldHRpbmdzIiwic2hvd1RoZW1lU3dpdGNoIiwic2hvd0Zvb3RlciIsInNob3dTZWFyY2giLCJzaG93RG93bmxvYWRUYXJiYWxsIiwiT2JqZWN0IiwiYXNzaWduIiwiYm9keUJlZm9yZSIsIm9wdGlvbnMiLCJ3ZWJQYWdlIiwiZ2V0IiwicmVuZGVyVGVtcGxhdGUiLCJzZXQiLCJlcnJvciIsIkVycm9yIiwic3RhY2siLCJzZXRIZWFkZXIiLCJIRUFERVJTIiwiVEVYVF9IVE1MIiwic2VuZCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGkvd2ViL2h0bWwvcmVuZGVySFRNTC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYnVpbGREZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgTFJVIGZyb20gJ2xydS1jYWNoZSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IFVSTCB9IGZyb20gJ3VybCc7XG5cbmltcG9ydCB7IEhFQURFUlMgfSBmcm9tICdAdmVyZGFjY2lvL2NvcmUnO1xuaW1wb3J0IHsgZ2V0UHVibGljVXJsIH0gZnJvbSAnQHZlcmRhY2Npby91cmwnO1xuXG5pbXBvcnQgeyBXRUJfVElUTEUgfSBmcm9tICcuLi8uLi8uLi9saWIvY29uc3RhbnRzJztcbmltcG9ydCB7IGhhc0xvZ2luLCBpc0hUVFBQcm90b2NvbCB9IGZyb20gJy4uLy4uLy4uL2xpYi91dGlscyc7XG5pbXBvcnQgcmVuZGVyVGVtcGxhdGUgZnJvbSAnLi90ZW1wbGF0ZSc7XG5cbmNvbnN0IHBrZ0pTT04gPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9wYWNrYWdlLmpzb24nKTtcbmNvbnN0IERFRkFVTFRfTEFOR1VBR0UgPSAnZXMtVVMnO1xuY29uc3QgY2FjaGUgPSBuZXcgTFJVKHsgbWF4OiA1MDAsIHR0bDogMTAwMCAqIDYwICogNjAgfSk7XG5cbmNvbnN0IGRlYnVnID0gYnVpbGREZWJ1ZygndmVyZGFjY2lvJyk7XG5cbmNvbnN0IGRlZmF1bHRNYW5pZmVzdEZpbGVzID0ge1xuICBqczogWydydW50aW1lLmpzJywgJ3ZlbmRvcnMuanMnLCAnbWFpbi5qcyddLFxuICBpY286ICdmYXZpY29uLmljbycsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQcmltYXJ5Q29sb3IocHJpbWFyeUNvbG9yKSB7XG4gIGNvbnN0IGlzSGV4ID0gL14jKyhbYS1mQS1GMC05XXs2fXxbYS1mQS1GMC05XXszfSkkL2kudGVzdChwcmltYXJ5Q29sb3IpO1xuICBpZiAoIWlzSGV4KSB7XG4gICAgZGVidWcoJ2ludmFsaWQgcHJpbWFyeSBjb2xvciAlbycsIHByaW1hcnlDb2xvcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIHByaW1hcnlDb2xvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVMb2dvKGNvbmZpZywgcmVxKSB7XG4gIGNvbnN0IGlzTG9jYWxGaWxlID0gY29uZmlnPy53ZWI/LmxvZ28gJiYgIWlzSFRUUFByb3RvY29sKGNvbmZpZz8ud2ViPy5sb2dvKTtcblxuICBpZiAoaXNMb2NhbEZpbGUpIHtcbiAgICByZXR1cm4gYCR7Z2V0UHVibGljVXJsKGNvbmZpZz8udXJsX3ByZWZpeCwgcmVxKX0tL3N0YXRpYy8ke3BhdGguYmFzZW5hbWUoY29uZmlnPy53ZWI/LmxvZ28pfWA7XG4gIH0gZWxzZSBpZiAoaXNIVFRQUHJvdG9jb2woY29uZmlnPy53ZWI/LmxvZ28pKSB7XG4gICAgcmV0dXJuIGNvbmZpZz8ud2ViPy5sb2dvO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZW5kZXJIVE1MKGNvbmZpZywgbWFuaWZlc3QsIG1hbmlmZXN0RmlsZXMsIHJlcSwgcmVzKSB7XG4gIGNvbnN0IHsgdXJsX3ByZWZpeCB9ID0gY29uZmlnO1xuICBjb25zdCBiYXNlID0gZ2V0UHVibGljVXJsKGNvbmZpZz8udXJsX3ByZWZpeCwgcmVxKTtcbiAgY29uc3QgYmFzZW5hbWUgPSBuZXcgVVJMKGJhc2UpLnBhdGhuYW1lO1xuICBjb25zdCBsYW5ndWFnZSA9IGNvbmZpZz8uaTE4bj8ud2ViID8/IERFRkFVTFRfTEFOR1VBR0U7XG4gIGNvbnN0IG5lZWRIdG1sQ2FjaGUgPSBbdW5kZWZpbmVkLCBudWxsXS5pbmNsdWRlcyhjb25maWc/LndlYj8uaHRtbF9jYWNoZSlcbiAgICA/IHRydWVcbiAgICA6IGNvbmZpZy53ZWIuaHRtbF9jYWNoZTtcbiAgY29uc3QgZGFya01vZGUgPSBjb25maWc/LndlYj8uZGFya01vZGUgPz8gZmFsc2U7XG4gIGNvbnN0IHRpdGxlID0gY29uZmlnPy53ZWI/LnRpdGxlID8/IFdFQl9USVRMRTtcbiAgY29uc3Qgc2NvcGUgPSBjb25maWc/LndlYj8uc2NvcGUgPz8gJyc7XG4gIGNvbnN0IGxvZ2luID0gaGFzTG9naW4oY29uZmlnKTtcbiAgY29uc3QgbG9nb1VSSSA9IHJlc29sdmVMb2dvKGNvbmZpZywgcmVxKTtcbiAgY29uc3QgcGtnTWFuYWdlcnMgPSBjb25maWc/LndlYj8ucGtnTWFuYWdlcnMgPz8gWyd5YXJuJywgJ3BucG0nLCAnbnBtJ107XG4gIGNvbnN0IHZlcnNpb24gPSBwa2dKU09OLnZlcnNpb247XG4gIGNvbnN0IHByaW1hcnlDb2xvciA9IHZhbGlkYXRlUHJpbWFyeUNvbG9yKGNvbmZpZz8ud2ViPy5wcmltYXJ5X2NvbG9yKSA/PyAnIzRiNWU0MCc7XG4gIGNvbnN0IHtcbiAgICBzY3JpcHRzQm9keUFmdGVyLFxuICAgIG1ldGFTY3JpcHRzLFxuICAgIHNjcmlwdHNib2R5QmVmb3JlLFxuICAgIHNob3dJbmZvLFxuICAgIHNob3dTZXR0aW5ncyxcbiAgICBzaG93VGhlbWVTd2l0Y2gsXG4gICAgc2hvd0Zvb3RlcixcbiAgICBzaG93U2VhcmNoLFxuICAgIHNob3dEb3dubG9hZFRhcmJhbGwsXG4gIH0gPSBPYmplY3QuYXNzaWduKFxuICAgIHt9LFxuICAgIHtcbiAgICAgIHNjcmlwdHNCb2R5QWZ0ZXI6IFtdLFxuICAgICAgYm9keUJlZm9yZTogW10sXG4gICAgICBtZXRhU2NyaXB0czogW10sXG4gICAgfSxcbiAgICBjb25maWc/LndlYlxuICApO1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIHNob3dJbmZvLFxuICAgIHNob3dTZXR0aW5ncyxcbiAgICBzaG93VGhlbWVTd2l0Y2gsXG4gICAgc2hvd0Zvb3RlcixcbiAgICBzaG93U2VhcmNoLFxuICAgIHNob3dEb3dubG9hZFRhcmJhbGwsXG4gICAgZGFya01vZGUsXG4gICAgdXJsX3ByZWZpeCxcbiAgICBiYXNlbmFtZSxcbiAgICBiYXNlLFxuICAgIHByaW1hcnlDb2xvcixcbiAgICB2ZXJzaW9uLFxuICAgIHBrZ01hbmFnZXJzLFxuICAgIGxvZ2luLFxuICAgIGxvZ286IGxvZ29VUkksXG4gICAgdGl0bGUsXG4gICAgc2NvcGUsXG4gICAgbGFuZ3VhZ2UsXG4gIH07XG5cbiAgbGV0IHdlYlBhZ2U7XG5cbiAgdHJ5IHtcbiAgICB3ZWJQYWdlID0gY2FjaGUuZ2V0KCd0ZW1wbGF0ZScpO1xuICAgIGlmICghd2ViUGFnZSkge1xuICAgICAgZGVidWcoJ3dlYiBvcHRpb25zICVvJywgb3B0aW9ucyk7XG4gICAgICBkZWJ1Zygnd2ViIG1hbmlmZXN0RmlsZXMgJW8nLCBtYW5pZmVzdEZpbGVzKTtcbiAgICAgIHdlYlBhZ2UgPSByZW5kZXJUZW1wbGF0ZShcbiAgICAgICAge1xuICAgICAgICAgIG1hbmlmZXN0OiBtYW5pZmVzdEZpbGVzID8/IGRlZmF1bHRNYW5pZmVzdEZpbGVzLFxuICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgc2NyaXB0c0JvZHlBZnRlcixcbiAgICAgICAgICBtZXRhU2NyaXB0cyxcbiAgICAgICAgICBzY3JpcHRzYm9keUJlZm9yZSxcbiAgICAgICAgfSxcbiAgICAgICAgbWFuaWZlc3RcbiAgICAgICk7XG4gICAgICBkZWJ1ZygndGVtcGxhdGUgOjogJW8nLCB3ZWJQYWdlKTtcbiAgICAgIGlmIChuZWVkSHRtbENhY2hlKSB7XG4gICAgICAgIGNhY2hlLnNldCgndGVtcGxhdGUnLCB3ZWJQYWdlKTtcbiAgICAgICAgZGVidWcoJ3NldCB0ZW1wbGF0ZSBjYWNoZScpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1ZygncmV1c2UgdGVtcGxhdGUgY2FjaGUnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGB0aGVtZSBjb3VsZCBub3QgYmUgbG9hZCwgc3RhY2sgJHtlcnJvci5zdGFja31gKTtcbiAgfVxuICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCBIRUFERVJTLlRFWFRfSFRNTCk7XG4gIHJlcy5z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