"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _compression = _interopRequireDefault(require("compression"));
var _cors = _interopRequireDefault(require("cors"));
var _express = _interopRequireDefault(require("express"));
var _lodash = _interopRequireDefault(require("lodash"));
var _auth = _interopRequireDefault(require("../lib/auth"));
var _config = _interopRequireDefault(require("../lib/config"));
var _constants = require("../lib/constants");
var _logger = require("../lib/logger");
var _pluginLoader = _interopRequireDefault(require("../lib/plugin-loader"));
var _storage = _interopRequireDefault(require("../lib/storage"));
var _utils = require("../lib/utils");
var _debug = _interopRequireDefault(require("./debug"));
var _endpoint = _interopRequireDefault(require("./endpoint"));
var _middleware = require("./middleware");
var _web = _interopRequireDefault(require("./web"));
var _api = _interopRequireDefault(require("./web/api"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const defineAPI = function (config, storage) {
  var _config$server;
  const auth = new _auth.default(config);
  const app = (0, _express.default)();

  // run in production mode by default, just in case
  // it shouldn't make any difference anyway
  app.set('env', process.env.NODE_ENV || 'production');

  // Allow `req.ip` to resolve properly when Verdaccio is behind a proxy or load-balancer
  // See: https://expressjs.com/en/guide/behind-proxies.html
  if ((_config$server = config.server) !== null && _config$server !== void 0 && _config$server.trustProxy) {
    app.set('trust proxy', config.server.trustProxy);
  }
  app.use((0, _cors.default)());

  // Router setup
  app.use((0, _middleware.log)(config));
  app.use(_middleware.errorReportingMiddleware);
  if (config.user_agent) {
    app.use(function (req, res, next) {
      res.setHeader('X-Powered-By', (0, _utils.getUserAgent)(config.user_agent));
      next();
    });
  } else {
    app.disable('x-powered-by');
  }
  app.use((0, _compression.default)());
  app.get('/-/static/favicon.ico', (0, _middleware.serveFavicon)(config));

  // Hook for tests only
  if (config._debug) {
    (0, _debug.default)(app, config.self_path);
  }

  // register middleware plugins
  const plugin_params = {
    config: config,
    logger: _logger.logger
  };
  const plugins = (0, _pluginLoader.default)(config, config.middlewares, plugin_params, function (plugin) {
    return plugin.register_middlewares;
  });
  plugins.forEach(plugin => {
    plugin.register_middlewares(app, auth, storage);
  });

  // For  npm request
  app.use((0, _endpoint.default)(config, auth, storage));

  // For WebUI & WebUI API
  if (_lodash.default.get(config, 'web.enable', true)) {
    app.use('/', (0, _web.default)(config, auth, storage));
    app.use('/-/verdaccio/', (0, _api.default)(config, auth, storage));
  } else {
    app.get('/', function (req, res, next) {
      next(_utils.ErrorCode.getNotFound(_constants.API_ERROR.WEB_DISABLED));
    });
  }

  // Catch 404
  app.get('/*', function (req, res, next) {
    next(_utils.ErrorCode.getNotFound(_constants.API_ERROR.FILE_NOT_FOUND));
  });
  app.use(_middleware.handleError);
  app.use(_middleware.final);
  return app;
};
var _default = async function _default(configHash) {
  (0, _logger.setup)(configHash.logs);
  const config = new _config.default(_lodash.default.cloneDeep(configHash));
  // register middleware plugins
  const plugin_params = {
    config: config,
    logger: _logger.logger
  };
  const filters = (0, _pluginLoader.default)(config, config.filters || {}, plugin_params, plugin => plugin.filter_metadata);
  const storage = new _storage.default(config);
  // waits until init calls have been initialized
  await storage.init(config, filters);
  return defineAPI(config, storage);
};
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZWZpbmVBUEkiLCJjb25maWciLCJzdG9yYWdlIiwiYXV0aCIsIkF1dGgiLCJhcHAiLCJleHByZXNzIiwic2V0IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic2VydmVyIiwidHJ1c3RQcm94eSIsInVzZSIsImNvcnMiLCJsb2ciLCJlcnJvclJlcG9ydGluZ01pZGRsZXdhcmUiLCJ1c2VyX2FnZW50IiwicmVxIiwicmVzIiwibmV4dCIsInNldEhlYWRlciIsImdldFVzZXJBZ2VudCIsImRpc2FibGUiLCJjb21wcmVzc2lvbiIsImdldCIsInNlcnZlRmF2aWNvbiIsIl9kZWJ1ZyIsImhvb2tEZWJ1ZyIsInNlbGZfcGF0aCIsInBsdWdpbl9wYXJhbXMiLCJsb2dnZXIiLCJwbHVnaW5zIiwibG9hZFBsdWdpbiIsIm1pZGRsZXdhcmVzIiwicGx1Z2luIiwicmVnaXN0ZXJfbWlkZGxld2FyZXMiLCJmb3JFYWNoIiwiYXBpRW5kcG9pbnQiLCJfIiwid2ViIiwid2ViQVBJIiwiRXJyb3JDb2RlIiwiZ2V0Tm90Rm91bmQiLCJBUElfRVJST1IiLCJXRUJfRElTQUJMRUQiLCJGSUxFX05PVF9GT1VORCIsImhhbmRsZUVycm9yIiwiZmluYWwiLCJjb25maWdIYXNoIiwic2V0dXAiLCJsb2dzIiwiQXBwQ29uZmlnIiwiY2xvbmVEZWVwIiwiZmlsdGVycyIsImZpbHRlcl9tZXRhZGF0YSIsIlN0b3JhZ2UiLCJpbml0Il0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2FwaS9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29tcHJlc3Npb24gZnJvbSAnY29tcHJlc3Npb24nO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcywgeyBBcHBsaWNhdGlvbiB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgQ29uZmlnIGFzIElDb25maWcsIElQbHVnaW5NaWRkbGV3YXJlLCBJUGx1Z2luU3RvcmFnZUZpbHRlciB9IGZyb20gJ0B2ZXJkYWNjaW8vdHlwZXMnO1xuXG5pbXBvcnQgQXV0aCBmcm9tICcuLi9saWIvYXV0aCc7XG5pbXBvcnQgQXBwQ29uZmlnIGZyb20gJy4uL2xpYi9jb25maWcnO1xuaW1wb3J0IHsgQVBJX0VSUk9SLCBIVFRQX1NUQVRVUyB9IGZyb20gJy4uL2xpYi9jb25zdGFudHMnO1xuaW1wb3J0IHsgbG9nZ2VyLCBzZXR1cCB9IGZyb20gJy4uL2xpYi9sb2dnZXInO1xuaW1wb3J0IGxvYWRQbHVnaW4gZnJvbSAnLi4vbGliL3BsdWdpbi1sb2FkZXInO1xuaW1wb3J0IFN0b3JhZ2UgZnJvbSAnLi4vbGliL3N0b3JhZ2UnO1xuaW1wb3J0IHsgRXJyb3JDb2RlLCBnZXRVc2VyQWdlbnQgfSBmcm9tICcuLi9saWIvdXRpbHMnO1xuaW1wb3J0IHtcbiAgJE5leHRGdW5jdGlvblZlcixcbiAgJFJlcXVlc3RFeHRlbmQsXG4gICRSZXNwb25zZUV4dGVuZCxcbiAgSUF1dGgsXG4gIElTdG9yYWdlSGFuZGxlcixcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IGhvb2tEZWJ1ZyBmcm9tICcuL2RlYnVnJztcbmltcG9ydCBhcGlFbmRwb2ludCBmcm9tICcuL2VuZHBvaW50JztcbmltcG9ydCB7IGVycm9yUmVwb3J0aW5nTWlkZGxld2FyZSwgZmluYWwsIGhhbmRsZUVycm9yLCBsb2csIHNlcnZlRmF2aWNvbiB9IGZyb20gJy4vbWlkZGxld2FyZSc7XG5pbXBvcnQgd2ViIGZyb20gJy4vd2ViJztcbmltcG9ydCB3ZWJBUEkgZnJvbSAnLi93ZWIvYXBpJztcblxuY29uc3QgZGVmaW5lQVBJID0gZnVuY3Rpb24gKGNvbmZpZzogSUNvbmZpZywgc3RvcmFnZTogSVN0b3JhZ2VIYW5kbGVyKTogYW55IHtcbiAgY29uc3QgYXV0aDogSUF1dGggPSBuZXcgQXV0aChjb25maWcpO1xuICBjb25zdCBhcHA6IEFwcGxpY2F0aW9uID0gZXhwcmVzcygpO1xuXG4gIC8vIHJ1biBpbiBwcm9kdWN0aW9uIG1vZGUgYnkgZGVmYXVsdCwganVzdCBpbiBjYXNlXG4gIC8vIGl0IHNob3VsZG4ndCBtYWtlIGFueSBkaWZmZXJlbmNlIGFueXdheVxuICBhcHAuc2V0KCdlbnYnLCBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAncHJvZHVjdGlvbicpO1xuXG4gIC8vIEFsbG93IGByZXEuaXBgIHRvIHJlc29sdmUgcHJvcGVybHkgd2hlbiBWZXJkYWNjaW8gaXMgYmVoaW5kIGEgcHJveHkgb3IgbG9hZC1iYWxhbmNlclxuICAvLyBTZWU6IGh0dHBzOi8vZXhwcmVzc2pzLmNvbS9lbi9ndWlkZS9iZWhpbmQtcHJveGllcy5odG1sXG4gIGlmIChjb25maWcuc2VydmVyPy50cnVzdFByb3h5KSB7XG4gICAgYXBwLnNldCgndHJ1c3QgcHJveHknLCBjb25maWcuc2VydmVyLnRydXN0UHJveHkpO1xuICB9XG5cbiAgYXBwLnVzZShjb3JzKCkpO1xuXG4gIC8vIFJvdXRlciBzZXR1cFxuICBhcHAudXNlKGxvZyhjb25maWcpKTtcbiAgYXBwLnVzZShlcnJvclJlcG9ydGluZ01pZGRsZXdhcmUpO1xuICBpZiAoY29uZmlnLnVzZXJfYWdlbnQpIHtcbiAgICBhcHAudXNlKGZ1bmN0aW9uIChyZXE6ICRSZXF1ZXN0RXh0ZW5kLCByZXM6ICRSZXNwb25zZUV4dGVuZCwgbmV4dDogJE5leHRGdW5jdGlvblZlcik6IHZvaWQge1xuICAgICAgcmVzLnNldEhlYWRlcignWC1Qb3dlcmVkLUJ5JywgZ2V0VXNlckFnZW50KGNvbmZpZy51c2VyX2FnZW50KSk7XG4gICAgICBuZXh0KCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXBwLmRpc2FibGUoJ3gtcG93ZXJlZC1ieScpO1xuICB9XG5cbiAgYXBwLnVzZShjb21wcmVzc2lvbigpKTtcblxuICBhcHAuZ2V0KCcvLS9zdGF0aWMvZmF2aWNvbi5pY28nLCBzZXJ2ZUZhdmljb24oY29uZmlnKSk7XG5cbiAgLy8gSG9vayBmb3IgdGVzdHMgb25seVxuICBpZiAoY29uZmlnLl9kZWJ1Zykge1xuICAgIGhvb2tEZWJ1ZyhhcHAsIGNvbmZpZy5zZWxmX3BhdGgpO1xuICB9XG5cbiAgLy8gcmVnaXN0ZXIgbWlkZGxld2FyZSBwbHVnaW5zXG4gIGNvbnN0IHBsdWdpbl9wYXJhbXMgPSB7XG4gICAgY29uZmlnOiBjb25maWcsXG4gICAgbG9nZ2VyOiBsb2dnZXIsXG4gIH07XG5cbiAgY29uc3QgcGx1Z2luczogSVBsdWdpbk1pZGRsZXdhcmU8SUNvbmZpZz5bXSA9IGxvYWRQbHVnaW4oXG4gICAgY29uZmlnLFxuICAgIGNvbmZpZy5taWRkbGV3YXJlcyxcbiAgICBwbHVnaW5fcGFyYW1zLFxuICAgIGZ1bmN0aW9uIChwbHVnaW46IElQbHVnaW5NaWRkbGV3YXJlPElDb25maWc+KSB7XG4gICAgICByZXR1cm4gcGx1Z2luLnJlZ2lzdGVyX21pZGRsZXdhcmVzO1xuICAgIH1cbiAgKTtcbiAgcGx1Z2lucy5mb3JFYWNoKChwbHVnaW46IElQbHVnaW5NaWRkbGV3YXJlPElDb25maWc+KSA9PiB7XG4gICAgcGx1Z2luLnJlZ2lzdGVyX21pZGRsZXdhcmVzKGFwcCwgYXV0aCwgc3RvcmFnZSk7XG4gIH0pO1xuXG4gIC8vIEZvciAgbnBtIHJlcXVlc3RcbiAgYXBwLnVzZShhcGlFbmRwb2ludChjb25maWcsIGF1dGgsIHN0b3JhZ2UpKTtcblxuICAvLyBGb3IgV2ViVUkgJiBXZWJVSSBBUElcbiAgaWYgKF8uZ2V0KGNvbmZpZywgJ3dlYi5lbmFibGUnLCB0cnVlKSkge1xuICAgIGFwcC51c2UoJy8nLCB3ZWIoY29uZmlnLCBhdXRoLCBzdG9yYWdlKSk7XG4gICAgYXBwLnVzZSgnLy0vdmVyZGFjY2lvLycsIHdlYkFQSShjb25maWcsIGF1dGgsIHN0b3JhZ2UpKTtcbiAgfSBlbHNlIHtcbiAgICBhcHAuZ2V0KCcvJywgZnVuY3Rpb24gKHJlcTogJFJlcXVlc3RFeHRlbmQsIHJlczogJFJlc3BvbnNlRXh0ZW5kLCBuZXh0OiAkTmV4dEZ1bmN0aW9uVmVyKSB7XG4gICAgICBuZXh0KEVycm9yQ29kZS5nZXROb3RGb3VuZChBUElfRVJST1IuV0VCX0RJU0FCTEVEKSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBDYXRjaCA0MDRcbiAgYXBwLmdldCgnLyonLCBmdW5jdGlvbiAocmVxOiAkUmVxdWVzdEV4dGVuZCwgcmVzOiAkUmVzcG9uc2VFeHRlbmQsIG5leHQ6ICROZXh0RnVuY3Rpb25WZXIpIHtcbiAgICBuZXh0KEVycm9yQ29kZS5nZXROb3RGb3VuZChBUElfRVJST1IuRklMRV9OT1RfRk9VTkQpKTtcbiAgfSk7XG4gIGFwcC51c2UoaGFuZGxlRXJyb3IpO1xuICBhcHAudXNlKGZpbmFsKTtcblxuICByZXR1cm4gYXBwO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgKGFzeW5jIGZ1bmN0aW9uIChjb25maWdIYXNoOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICBzZXR1cChjb25maWdIYXNoLmxvZ3MpO1xuICBjb25zdCBjb25maWc6IElDb25maWcgPSBuZXcgQXBwQ29uZmlnKF8uY2xvbmVEZWVwKGNvbmZpZ0hhc2gpKTtcbiAgLy8gcmVnaXN0ZXIgbWlkZGxld2FyZSBwbHVnaW5zXG4gIGNvbnN0IHBsdWdpbl9wYXJhbXMgPSB7XG4gICAgY29uZmlnOiBjb25maWcsXG4gICAgbG9nZ2VyOiBsb2dnZXIsXG4gIH07XG4gIGNvbnN0IGZpbHRlcnMgPSBsb2FkUGx1Z2luKFxuICAgIGNvbmZpZyxcbiAgICBjb25maWcuZmlsdGVycyB8fCB7fSxcbiAgICBwbHVnaW5fcGFyYW1zLFxuICAgIChwbHVnaW46IElQbHVnaW5TdG9yYWdlRmlsdGVyPElDb25maWc+KSA9PiBwbHVnaW4uZmlsdGVyX21ldGFkYXRhXG4gICk7XG4gIGNvbnN0IHN0b3JhZ2U6IElTdG9yYWdlSGFuZGxlciA9IG5ldyBTdG9yYWdlKGNvbmZpZyk7XG4gIC8vIHdhaXRzIHVudGlsIGluaXQgY2FsbHMgaGF2ZSBiZWVuIGluaXRpYWxpemVkXG4gIGF3YWl0IHN0b3JhZ2UuaW5pdChjb25maWcsIGZpbHRlcnMpO1xuICByZXR1cm4gZGVm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