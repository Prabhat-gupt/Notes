"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.hasProxyTo = hasProxyTo;
exports.normalisePackageAccess = normalisePackageAccess;
exports.normalizeUserList = normalizeUserList;
exports.sanityCheckNames = sanityCheckNames;
exports.sanityCheckUplinksProps = sanityCheckUplinksProps;
exports.uplinkSanityCheck = uplinkSanityCheck;
var _assert = _interopRequireDefault(require("assert"));
var _lodash = _interopRequireDefault(require("lodash"));
var _utils = require("@verdaccio/utils");
var _utils2 = require("./utils");
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
const BLACKLIST = {
  all: true,
  anonymous: true,
  undefined: true,
  owner: true,
  none: true
};

/**
 * Normalize user list.
 * @return {Array}
 */
function normalizeUserList(oldFormat, newFormat) {
  const result = [];
  /* eslint prefer-rest-params: "off" */

  for (let i = 0; i < arguments.length; i++) {
    if (arguments[i] == null) {
      continue;
    }

    // if it's a string, split it to array
    if (_lodash.default.isString(arguments[i])) {
      result.push(arguments[i].split(/\s+/));
    } else if (Array.isArray(arguments[i])) {
      result.push(arguments[i]);
    } else {
      throw _utils2.ErrorCode.getInternalError('CONFIG: bad package acl (array or string expected): ' + JSON.stringify(arguments[i]));
    }
  }
  return _lodash.default.flatten(result);
}
function uplinkSanityCheck(uplinks, users = BLACKLIST) {
  const newUplinks = _lodash.default.clone(uplinks);
  let newUsers = _lodash.default.clone(users);
  for (const uplink in newUplinks) {
    if (Object.prototype.hasOwnProperty.call(newUplinks, uplink)) {
      if (_lodash.default.isNil(newUplinks[uplink].cache)) {
        newUplinks[uplink].cache = true;
      }
      newUsers = sanityCheckNames(uplink, newUsers);
    }
  }
  return newUplinks;
}
function sanityCheckNames(item, users) {
  (0, _assert.default)(item !== 'all' && item !== 'owner' && item !== 'anonymous' && item !== 'undefined' && item !== 'none', 'CONFIG: reserved uplink name: ' + item);
  (0, _assert.default)(!item.match(/\s/), 'CONFIG: invalid uplink name: ' + item);
  (0, _assert.default)(_lodash.default.isNil(users[item]), 'CONFIG: duplicate uplink name: ' + item);
  users[item] = true;
  return users;
}
function sanityCheckUplinksProps(configUpLinks) {
  const uplinks = _lodash.default.clone(configUpLinks);
  for (const uplink in uplinks) {
    if (Object.prototype.hasOwnProperty.call(uplinks, uplink)) {
      (0, _assert.default)(uplinks[uplink].url, 'CONFIG: no url for uplink: ' + uplink);
      (0, _assert.default)(_lodash.default.isString(uplinks[uplink].url), 'CONFIG: wrong url format for uplink: ' + uplink);
      uplinks[uplink].url = uplinks[uplink].url.replace(/\/$/, '');
    }
  }
  return uplinks;
}

/**
 * Check whether an uplink can proxy
 */
function hasProxyTo(pkg, upLink, packages) {
  const matchedPkg = (0, _utils.getMatchedPackagesSpec)(pkg, packages);
  const proxyList = typeof matchedPkg !== 'undefined' ? matchedPkg.proxy : [];
  if (proxyList) {
    return proxyList.some(curr => upLink === curr);
  }
  return false;
}
function normalisePackageAccess(packages) {
  const normalizedPkgs = _objectSpread({}, packages);
  // add a default rule for all packages to make writing plugins easier
  if (_lodash.default.isNil(normalizedPkgs['**'])) {
    normalizedPkgs['**'] = {
      access: [],
      publish: [],
      proxy: []
    };
  }
  for (const pkg in packages) {
    if (Object.prototype.hasOwnProperty.call(packages, pkg)) {
      (0, _assert.default)(_lodash.default.isObject(packages[pkg]) && _lodash.default.isArray(packages[pkg]) === false, `CONFIG: bad "'${pkg}'" package description (object expected)`);
      normalizedPkgs[pkg].access = normalizeUserList(packages[pkg].allow_access, packages[pkg].access);
      delete normalizedPkgs[pkg].allow_access;
      normalizedPkgs[pkg].publish = normalizeUserList(packages[pkg].allow_publish, packages[pkg].publish);
      delete normalizedPkgs[pkg].allow_publish;
      normalizedPkgs[pkg].proxy = normalizeUserList(packages[pkg].proxy_access, packages[pkg].proxy);
      delete normalizedPkgs[pkg].proxy_access;
      // if unpublish is not defined, we set to false to fallback in publish access
      normalizedPkgs[pkg].unpublish = _lodash.default.isUndefined(packages[pkg].unpublish) ? false : normalizeUserList([], packages[pkg].unpublish);
    }
  }
  return normalizedPkgs;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCTEFDS0xJU1QiLCJhbGwiLCJhbm9ueW1vdXMiLCJ1bmRlZmluZWQiLCJvd25lciIsIm5vbmUiLCJub3JtYWxpemVVc2VyTGlzdCIsIm9sZEZvcm1hdCIsIm5ld0Zvcm1hdCIsInJlc3VsdCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJfIiwiaXNTdHJpbmciLCJwdXNoIiwic3BsaXQiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvckNvZGUiLCJnZXRJbnRlcm5hbEVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImZsYXR0ZW4iLCJ1cGxpbmtTYW5pdHlDaGVjayIsInVwbGlua3MiLCJ1c2VycyIsIm5ld1VwbGlua3MiLCJjbG9uZSIsIm5ld1VzZXJzIiwidXBsaW5rIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaXNOaWwiLCJjYWNoZSIsInNhbml0eUNoZWNrTmFtZXMiLCJpdGVtIiwiYXNzZXJ0IiwibWF0Y2giLCJzYW5pdHlDaGVja1VwbGlua3NQcm9wcyIsImNvbmZpZ1VwTGlua3MiLCJ1cmwiLCJyZXBsYWNlIiwiaGFzUHJveHlUbyIsInBrZyIsInVwTGluayIsInBhY2thZ2VzIiwibWF0Y2hlZFBrZyIsImdldE1hdGNoZWRQYWNrYWdlc1NwZWMiLCJwcm94eUxpc3QiLCJwcm94eSIsInNvbWUiLCJjdXJyIiwibm9ybWFsaXNlUGFja2FnZUFjY2VzcyIsIm5vcm1hbGl6ZWRQa2dzIiwiYWNjZXNzIiwicHVibGlzaCIsImlzT2JqZWN0IiwiYWxsb3dfYWNjZXNzIiwiYWxsb3dfcHVibGlzaCIsInByb3h5X2FjY2VzcyIsInVucHVibGlzaCIsImlzVW5kZWZpbmVkIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi9jb25maWctdXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFzc2VydCBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgUGFja2FnZUxpc3QsIFVwTGlua3NDb25mTGlzdCB9IGZyb20gJ0B2ZXJkYWNjaW8vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0TWF0Y2hlZFBhY2thZ2VzU3BlYyB9IGZyb20gJ0B2ZXJkYWNjaW8vdXRpbHMnO1xuXG5pbXBvcnQgeyBMZWdhY3lQYWNrYWdlTGlzdCwgTWF0Y2hlZFBhY2thZ2UgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBFcnJvckNvZGUgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgQkxBQ0tMSVNUID0ge1xuICBhbGw6IHRydWUsXG4gIGFub255bW91czogdHJ1ZSxcbiAgdW5kZWZpbmVkOiB0cnVlLFxuICBvd25lcjogdHJ1ZSxcbiAgbm9uZTogdHJ1ZSxcbn07XG5cbi8qKlxuICogTm9ybWFsaXplIHVzZXIgbGlzdC5cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplVXNlckxpc3Qob2xkRm9ybWF0OiBhbnksIG5ld0Zvcm1hdDogYW55KTogYW55IHtcbiAgY29uc3QgcmVzdWx0OiBhbnlbXVtdID0gW107XG4gIC8qIGVzbGludCBwcmVmZXItcmVzdC1wYXJhbXM6IFwib2ZmXCIgKi9cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcmd1bWVudHNbaV0gPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gaWYgaXQncyBhIHN0cmluZywgc3BsaXQgaXQgdG8gYXJyYXlcbiAgICBpZiAoXy5pc1N0cmluZyhhcmd1bWVudHNbaV0pKSB7XG4gICAgICByZXN1bHQucHVzaChhcmd1bWVudHNbaV0uc3BsaXQoL1xccysvKSk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1tpXSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yQ29kZS5nZXRJbnRlcm5hbEVycm9yKFxuICAgICAgICAnQ09ORklHOiBiYWQgcGFja2FnZSBhY2wgKGFycmF5IG9yIHN0cmluZyBleHBlY3RlZCk6ICcgKyBKU09OLnN0cmluZ2lmeShhcmd1bWVudHNbaV0pXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gXy5mbGF0dGVuKHJlc3VsdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGxpbmtTYW5pdHlDaGVjayhcbiAgdXBsaW5rczogVXBMaW5rc0NvbmZMaXN0LFxuICB1c2VyczogYW55ID0gQkxBQ0tMSVNUXG4pOiBVcExpbmtzQ29uZkxpc3Qge1xuICBjb25zdCBuZXdVcGxpbmtzID0gXy5jbG9uZSh1cGxpbmtzKTtcbiAgbGV0IG5ld1VzZXJzID0gXy5jbG9uZSh1c2Vycyk7XG5cbiAgZm9yIChjb25zdCB1cGxpbmsgaW4gbmV3VXBsaW5rcykge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobmV3VXBsaW5rcywgdXBsaW5rKSkge1xuICAgICAgaWYgKF8uaXNOaWwobmV3VXBsaW5rc1t1cGxpbmtdLmNhY2hlKSkge1xuICAgICAgICBuZXdVcGxpbmtzW3VwbGlua10uY2FjaGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgbmV3VXNlcnMgPSBzYW5pdHlDaGVja05hbWVzKHVwbGluaywgbmV3VXNlcnMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXdVcGxpbmtzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FuaXR5Q2hlY2tOYW1lcyhpdGVtOiBzdHJpbmcsIHVzZXJzOiBhbnkpOiBhbnkge1xuICBhc3NlcnQoXG4gICAgaXRlbSAhPT0gJ2FsbCcgJiZcbiAgICAgIGl0ZW0gIT09ICdvd25lcicgJiZcbiAgICAgIGl0ZW0gIT09ICdhbm9ueW1vdXMnICYmXG4gICAgICBpdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgaXRlbSAhPT0gJ25vbmUnLFxuICAgICdDT05GSUc6IHJlc2VydmVkIHVwbGluayBuYW1lOiAnICsgaXRlbVxuICApO1xuICBhc3NlcnQoIWl0ZW0ubWF0Y2goL1xccy8pLCAnQ09ORklHOiBpbnZhbGlkIHVwbGluayBuYW1lOiAnICsgaXRlbSk7XG4gIGFzc2VydChfLmlzTmlsKHVzZXJzW2l0ZW1dKSwgJ0NPTkZJRzogZHVwbGljYXRlIHVwbGluayBuYW1lOiAnICsgaXRlbSk7XG4gIHVzZXJzW2l0ZW1dID0gdHJ1ZTtcblxuICByZXR1cm4gdXNlcnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdHlDaGVja1VwbGlua3NQcm9wcyhjb25maWdVcExpbmtzOiBVcExpbmtzQ29uZkxpc3QpOiBVcExpbmtzQ29uZkxpc3Qge1xuICBjb25zdCB1cGxpbmtzID0gXy5jbG9uZShjb25maWdVcExpbmtzKTtcblxuICBmb3IgKGNvbnN0IHVwbGluayBpbiB1cGxpbmtzKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh1cGxpbmtzLCB1cGxpbmspKSB7XG4gICAgICBhc3NlcnQodXBsaW5rc1t1cGxpbmtdLnVybCwgJ0NPTkZJRzogbm8gdXJsIGZvciB1cGxpbms6ICcgKyB1cGxpbmspO1xuICAgICAgYXNzZXJ0KF8uaXNTdHJpbmcodXBsaW5rc1t1cGxpbmtdLnVybCksICdDT05GSUc6IHdyb25nIHVybCBmb3JtYXQgZm9yIHVwbGluazogJyArIHVwbGluayk7XG4gICAgICB1cGxpbmtzW3VwbGlua10udXJsID0gdXBsaW5rc1t1cGxpbmtdLnVybC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1cGxpbmtzO1xufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgYW4gdXBsaW5rIGNhbiBwcm94eVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzUHJveHlUbyhwa2c6IHN0cmluZywgdXBMaW5rOiBzdHJpbmcsIHBhY2thZ2VzOiBQYWNrYWdlTGlzdCk6IGJvb2xlYW4ge1xuICBjb25zdCBtYXRjaGVkUGtnOiBNYXRjaGVkUGFja2FnZSA9IGdldE1hdGNoZWRQYWNrYWdlc1NwZWMocGtnLCBwYWNrYWdlcyk7XG4gIGNvbnN0IHByb3h5TGlzdCA9IHR5cGVvZiBtYXRjaGVkUGtnICE9PSAndW5kZWZpbmVkJyA/IG1hdGNoZWRQa2cucHJveHkgOiBbXTtcbiAgaWYgKHByb3h5TGlzdCkge1xuICAgIHJldHVybiBwcm94eUxpc3Quc29tZSgoY3VycikgPT4gdXBMaW5rID09PSBjdXJyKTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGlzZVBhY2thZ2VBY2Nlc3MocGFja2FnZXM6IExlZ2FjeVBhY2thZ2VMaXN0KTogTGVnYWN5UGFja2FnZUxpc3Qge1xuICBjb25zdCBub3JtYWxpemVkUGtnczogTGVnYWN5UGFja2FnZUxpc3QgPSB7IC4uLnBhY2thZ2VzIH07XG4gIC8vIGFkZCBhIGRlZmF1bHQgcnVsZSBmb3IgYWxsIHBhY2thZ2VzIHRvIG1ha2Ugd3JpdGluZyBwbHVnaW5zIGVhc2llclxuICBpZiAoXy5pc05pbChub3JtYWxpemVkUGtnc1snKionXSkpIHtcbiAgICBub3JtYWxpemVkUGtnc1snKionXSA9IHsgYWNjZXNzOiBbXSwgcHVibGlzaDogW10sIHByb3h5OiBbXSB9O1xuICB9XG5cbiAgZm9yIChjb25zdCBwa2cgaW4gcGFja2FnZXMpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHBhY2thZ2VzLCBwa2cpKSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIF8uaXNPYmplY3QocGFja2FnZXNbcGtnXSkgJiYgXy5pc0FycmF5KHBhY2thZ2VzW3BrZ10pID09PSBmYWxzZSxcbiAgICAgICAgYENPTkZJRzogYmFkIFwiJyR7cGtnfSdcIiBwYWNrYWdlIGRlc2NyaXB0aW9uIChvYmplY3QgZXhwZWN0ZWQpYFxuICAgICAgKTtcbiAgICAgIG5vcm1hbGl6ZWRQa2dzW3BrZ10uYWNjZXNzID0gbm9ybWFsaXplVXNlckxpc3QoXG4gICAgICAgIHBhY2thZ2VzW3BrZ10uYWxsb3dfYWNjZXNzLFxuICAgICAgICBwYWNrYWdlc1twa2ddLmFjY2Vzc1xuICAgICAgKTtcbiAgICAgIGRlbGV0ZSBub3JtYWxpemVkUGtnc1twa2ddLmFsbG93X2FjY2VzcztcbiAgICAgIG5vcm1hbGl6ZWRQa2dzW3BrZ10ucHVibGlzaCA9IG5vcm1hbGl6ZVVzZXJMaXN0KFxuICAgICAgICBwYWNrYWdlc1twa2ddLmFsbG93X3B1Ymxpc2gsXG4gICAgICAgIHBhY2thZ2VzW3BrZ10ucHVibGlzaFxuICAgICAgKTtcbiAgICAgIGRlbGV0ZSBub3JtYWxpemVkUGtnc1twa2ddLmFsbG93X3B1Ymxpc2g7XG4gICAgICBub3JtYWxpemVkUGtnc1twa2ddLnByb3h5ID0gbm9ybWFsaXplVXNlckxpc3QoXG4gICAgICAgIHBhY2thZ2VzW3BrZ10ucHJveHlfYWNjZXNzLFxuICAgICAgICBwYWNrYWdlc1twa2ddLnByb3h5XG4gICAgICApO1xuICAgICAgZGVsZXRlIG5vcm1hbGl6ZWRQa2dzW3BrZ10ucHJveHlfYWNjZXNzO1xuICAgICAgLy8gaWYgdW5wdWJsaXNoIGlzIG5vdCBkZWZpbmVkLCB3ZSBzZXQgdG8gZmFsc2UgdG8gZmFsbGJhY2sgaW4gcHVibGlzaCBhY2Nlc3NcbiAgICAgIG5vcm1hbGl6ZWRQa2dzW3BrZ10udW5wdWJsaXNoID0gXy5pc1VuZGVmaW5lZChwYWNrYWdlc1twa2ddLnVucHVibGlzaClcbiAgICAgICAgPyBmYWxzZVxuICAgICAgICA6IG5vcm1hbGl6ZVVzZXJMaXN0KFtdLCBwYWNrYWdlc1twa2ddLnVucHVibGlzaCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZWRQa2dzO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBQW9DO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVwQyxNQUFNQSxTQUFTLEdBQUc7RUFDaEJDLEdBQUcsRUFBRSxJQUFJO0VBQ1RDLFNBQVMsRUFBRSxJQUFJO0VB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