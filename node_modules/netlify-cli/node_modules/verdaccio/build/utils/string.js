"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getByQualityPriorityValue = getByQualityPriorityValue;
exports.spliceURL = spliceURL;
// @flow

function spliceURL(...args) {
  return Array.from(args).reduce((lastResult, current) => lastResult + current).replace(/([^:])(\/)+(.)/g, `$1/$3`);
}

/**
 * Quality values, or q-values and q-factors, are used to describe the order
 * of priority of values in a comma-separated list.
 * It is a special syntax allowed in some HTTP headers and in HTML.
 * https://developer.mozilla.org/en-US/docs/Glossary/Quality_values
 * @param headerValue
 */
function getByQualityPriorityValue(headerValue) {
  if (typeof headerValue !== 'string') {
    return '';
  }
  const split = headerValue.split(',');
  if (split.length <= 1) {
    const qList = split[0].split(';');
    return qList[0];
  }
  let [header] = split.reduce((acc, item) => {
    const qList = item.split(';');
    if (qList.length > 1) {
      const [accept, q] = qList;
      const [, query] = q.split('=');
      acc.push([accept.trim(), query ? query : 0]);
    } else {
      acc.push([qList[0], 0]);
    }
    return acc;
  }, []).sort(function (a, b) {
    return b[1] - a[1];
  });
  return header[0];
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzcGxpY2VVUkwiLCJhcmdzIiwiQXJyYXkiLCJmcm9tIiwicmVkdWNlIiwibGFzdFJlc3VsdCIsImN1cnJlbnQiLCJyZXBsYWNlIiwiZ2V0QnlRdWFsaXR5UHJpb3JpdHlWYWx1ZSIsImhlYWRlclZhbHVlIiwic3BsaXQiLCJsZW5ndGgiLCJxTGlzdCIsImhlYWRlciIsImFjYyIsIml0ZW0iLCJhY2NlcHQiLCJxIiwicXVlcnkiLCJwdXNoIiwidHJpbSIsInNvcnQiLCJhIiwiYiJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9zdHJpbmcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGljZVVSTCguLi5hcmdzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gIHJldHVybiBBcnJheS5mcm9tKGFyZ3MpXG4gICAgLnJlZHVjZSgobGFzdFJlc3VsdCwgY3VycmVudCkgPT4gbGFzdFJlc3VsdCArIGN1cnJlbnQpXG4gICAgLnJlcGxhY2UoLyhbXjpdKShcXC8pKyguKS9nLCBgJDEvJDNgKTtcbn1cblxuLyoqXG4gKiBRdWFsaXR5IHZhbHVlcywgb3IgcS12YWx1ZXMgYW5kIHEtZmFjdG9ycywgYXJlIHVzZWQgdG8gZGVzY3JpYmUgdGhlIG9yZGVyXG4gKiBvZiBwcmlvcml0eSBvZiB2YWx1ZXMgaW4gYSBjb21tYS1zZXBhcmF0ZWQgbGlzdC5cbiAqIEl0IGlzIGEgc3BlY2lhbCBzeW50YXggYWxsb3dlZCBpbiBzb21lIEhUVFAgaGVhZGVycyBhbmQgaW4gSFRNTC5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvR2xvc3NhcnkvUXVhbGl0eV92YWx1ZXNcbiAqIEBwYXJhbSBoZWFkZXJWYWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnlRdWFsaXR5UHJpb3JpdHlWYWx1ZShoZWFkZXJWYWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbCk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2YgaGVhZGVyVmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgY29uc3Qgc3BsaXQgPSBoZWFkZXJWYWx1ZS5zcGxpdCgnLCcpO1xuXG4gIGlmIChzcGxpdC5sZW5ndGggPD0gMSkge1xuICAgIGNvbnN0IHFMaXN0ID0gc3BsaXRbMF0uc3BsaXQoJzsnKTtcbiAgICByZXR1cm4gcUxpc3RbMF07XG4gIH1cblxuICBsZXQgW2hlYWRlcl0gPSBzcGxpdFxuICAgIC5yZWR1Y2UoKGFjYywgaXRlbTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBxTGlzdCA9IGl0ZW0uc3BsaXQoJzsnKTtcbiAgICAgIGlmIChxTGlzdC5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IFthY2NlcHQsIHFdID0gcUxpc3Q7XG4gICAgICAgIGNvbnN0IFssIHF1ZXJ5XSA9IHEuc3BsaXQoJz0nKTtcbiAgICAgICAgYWNjLnB1c2goW2FjY2VwdC50cmltKCksIHF1ZXJ5ID8gcXVlcnkgOiAwXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY2MucHVzaChbcUxpc3RbMF0sIDBdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10gYXMgYW55KVxuICAgIC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYlsxXSAtIGFbMV07XG4gICAgfSk7XG4gIHJldHVybiBoZWFkZXJbMF07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFTyxTQUFTQSxTQUFTLENBQUMsR0FBR0MsSUFBYyxFQUFVO0VBQ25ELE9BQU9DLEtBQUssQ0FBQ0MsSUFBSSxDQUFDRixJQUFJLENBQUMsQ0FDcEJHLE1BQU0sQ0FBQyxDQUFDQyxVQUFVLEVBQUVDLE9BQU8sS0FBS0QsVUFBVSxHQUFHQyxPQUFPLENBQUMsQ0FDckRDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRyxPQUFNLENBQUM7QUFDeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyx5QkFBeUIsQ0FBQ0MsV0FBc0MsRUFBVTtFQUN4RixJQUFJLE9BQU9BLFdBQVcsS0FBSyxRQUFRLEVBQUU7SUFDbkMsT0FBTyxFQUFFO0VBQ1g7RUFFQSxNQUFNQyxLQUFLLEdBQUdELFdBQVcsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQztFQUVwQyxJQUFJQSxLQUFLLENBQUNDLE1BQU0sSUFBSSxDQUFDLEVBQUU7SUFDckIsTUFBTUMsS0FBSyxHQUFHRixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUNBLEtBQUssQ0FBQyxHQUFHLENBQUM7SUFDakMsT0FBT0UsS0FBSyxDQUFDLENBQUMsQ0FBQztFQUNqQjtFQUVBLElBQUksQ0FBQ0MsTUFBTSxDQUFDLEdBQUdILEtBQUssQ0FDakJOLE1BQU0sQ0FBQyxDQUFDVSxHQUFHLEVBQUVDLElBQVksS0FBSztJQUM3QixNQUFNSCxLQUFLLEdBQUdHLElBQUksQ0FBQ0wsS0FBSyxDQUFDLEdBQUcsQ0FBQztJQUM3QixJQUFJRSxLQUFLLENBQUNELE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDcEIsTUFBTSxDQUFDSyxNQUFNLEVBQUVDLENBQUMsQ0FBQyxHQUFHTCxLQUFLO01BQ3pCLE1BQU0sR0FBR00sS0FBSyxDQUFDLEdBQUdELENBQUMsQ0FBQ1AsS0FBSyxDQUFDLEdBQUcsQ0FBQztNQUM5QkksR0FBRyxDQUFDSyxJQUFJLENBQUMsQ0FBQ0gsTUFBTSxDQUFDSSxJQUFJLEVBQUUsRUFBRUYsS0FBSyxHQUFHQSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDOUMsQ0FBQyxNQUFNO01BQ0xKLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDLENBQUNQLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN6QjtJQUNBLE9BQU9FLEdBQUc7RUFDWixDQUFDLEVBQUUsRUFBRSxDQUFRLENBQ1pPLElBQUksQ0FBQyxVQUFVQyxDQUFDLEVBQUVDLENBQUMsRUFBRTtJQUNwQixPQUFPQSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUdELENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDcEIsQ0FBQyxDQUFDO0VBQ0osT0FBT1QsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNsQiJ9