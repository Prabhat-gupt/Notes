{"version":3,"file":"crypto-utils.js","names":["defaultTarballHashAlgorithm","createTarballHash","createHash","stringToMD5","data","update","digest","generateRandomHexString","length","pseudoRandomBytes","toString"],"sources":["../src/crypto-utils.ts"],"sourcesContent":["import { Hash, createHash, pseudoRandomBytes } from 'crypto';\n\nexport const defaultTarballHashAlgorithm = 'sha1';\n\nexport function createTarballHash(): Hash {\n  return createHash(defaultTarballHashAlgorithm);\n}\n\n/**\n * Express doesn't do ETAGS with requests <= 1024b\n * we use md5 here, it works well on 1k+ bytes, but sucks with fewer data\n * could improve performance using crc32 after benchmarks.\n * @param {Object} data\n * @return {String}\n */\nexport function stringToMD5(data: Buffer | string): string {\n  return createHash('md5').update(data).digest('hex');\n}\n\nexport function generateRandomHexString(length = 8): string {\n  return pseudoRandomBytes(length).toString('hex');\n}\n"],"mappings":";;;;;;;;;AAAA;AAEO,MAAMA,2BAA2B,GAAG,MAAM;AAAC;AAE3C,SAASC,iBAAiB,GAAS;EACxC,OAAO,IAAAC,kBAAU,EAACF,2BAA2B,CAAC;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASG,WAAW,CAACC,IAAqB,EAAU;EACzD,OAAO,IAAAF,kBAAU,EAAC,KAAK,CAAC,CAACG,MAAM,CAACD,IAAI,CAAC,CAACE,MAAM,CAAC,KAAK,CAAC;AACrD;AAEO,SAASC,uBAAuB,CAACC,MAAM,GAAG,CAAC,EAAU;EAC1D,OAAO,IAAAC,yBAAiB,EAACD,MAAM,CAAC,CAACE,QAAQ,CAAC,KAAK,CAAC;AAClD"}