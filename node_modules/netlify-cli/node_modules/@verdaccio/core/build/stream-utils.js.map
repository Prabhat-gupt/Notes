{"version":3,"file":"stream-utils.js","names":["readableToString","stream","chunks","chunk","push","Buffer","from","buffer","concat","str","toString","transformObjectToString","Transform","objectMode","transform","encoding","callback","JSON","stringify"],"sources":["../src/stream-utils.ts"],"sourcesContent":["import { Readable, Transform } from 'stream';\n\n/**\n * Converts a buffer stream to a string.\n */\nconst readableToString = async (stream: Readable) => {\n  const chunks: Buffer[] = [];\n  for await (let chunk of stream) {\n    chunks.push(Buffer.from(chunk));\n  }\n  const buffer = Buffer.concat(chunks);\n  const str = buffer.toString('utf-8');\n  return str;\n};\n\n/**\n * Transform stream object  mode to string\n **/\nconst transformObjectToString = () => {\n  return new Transform({\n    objectMode: true,\n    transform: (chunk, encoding, callback) => {\n      callback(null, JSON.stringify(chunk));\n    },\n  });\n};\n\nexport { readableToString, transformObjectToString };\n"],"mappings":";;;;;;AAAA;AAEA;AACA;AACA;AACA,MAAMA,gBAAgB,GAAG,MAAOC,MAAgB,IAAK;EACnD,MAAMC,MAAgB,GAAG,EAAE;EAC3B,WAAW,IAAIC,KAAK,IAAIF,MAAM,EAAE;IAC9BC,MAAM,CAACE,IAAI,CAACC,MAAM,CAACC,IAAI,CAACH,KAAK,CAAC,CAAC;EACjC;EACA,MAAMI,MAAM,GAAGF,MAAM,CAACG,MAAM,CAACN,MAAM,CAAC;EACpC,MAAMO,GAAG,GAAGF,MAAM,CAACG,QAAQ,CAAC,OAAO,CAAC;EACpC,OAAOD,GAAG;AACZ,CAAC;;AAED;AACA;AACA;AAFA;AAGA,MAAME,uBAAuB,GAAG,MAAM;EACpC,OAAO,IAAIC,iBAAS,CAAC;IACnBC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE,CAACX,KAAK,EAAEY,QAAQ,EAAEC,QAAQ,KAAK;MACxCA,QAAQ,CAAC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACf,KAAK,CAAC,CAAC;IACvC;EACF,CAAC,CAAC;AACJ,CAAC;AAAC"}