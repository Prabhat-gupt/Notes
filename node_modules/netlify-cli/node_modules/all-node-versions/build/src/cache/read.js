import pathExists from"path-exists";

import{
getCacheFile,
getCacheFileContent,
setCacheFileContent}from
"./file.js";









export const readCachedVersions=async function(fetch){
if(fetch===true){
return;
}

const cacheFile=await getCacheFile();

if(!(await pathExists(cacheFile))){
return;
}

const{versionsInfo,age}=await getCacheFileContent(cacheFile);

if(isOldCache(age,fetch)){
return;
}

return versionsInfo;
};

const isOldCache=function(age,fetch){
return age>MAX_AGE_MS&&fetch!==false;
};


const MAX_AGE_MS=36e5;


export const writeCachedVersions=async function(versionsInfo){
const cacheFile=await getCacheFile();
await setCacheFileContent(cacheFile,versionsInfo);
};
//# sourceMappingURL=read.js.map